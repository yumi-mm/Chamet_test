{"name": "test_StartVideoChat[B_primary：拨打视频聊（观众给房主）]", "status": "failed", "statusDetails": {"message": "AssertionError: 接口处理结果错误，请检查！", "trace": "self = <chametApi.TestCase.TenPartyAllowawayOrdinary.test_084_startVideoChat.Test_StartVideoChat object at 0x0000029A98D7EB50>\ncaseData = {'api': 'POST /startVideoChat', 'apiName': '拨打视频聊', 'caseName': '拨打视频聊（观众给房主）', 'data': {'appsign': '574410FF6BF6C8D2D0632868D9DC833E', 'callType': 14, 'ctype': '2', 'touserid': 2000004, ...}, ...}\n\n    @pytest.mark.parametrize('caseData', caseDataList, ids=caseNameList)\n    def test_StartVideoChat(self, caseData):\n        time.sleep(5)\n        user_type = 'audience'\n        allLogin(user_type)\n>       returnValue = request(caseData)\n\nTestCase\\TenPartyAllowawayOrdinary\\test_084_startVideoChat.py:24: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncaseData = {'api': 'POST /startVideoChat', 'apiName': '拨打视频聊', 'caseName': '拨打视频聊（观众给房主）', 'data': {'appsign': '574410FF6BF6C8D2D0632868D9DC833E', 'callType': 14, 'ctype': '2', 'touserid': 2000004, ...}, ...}\n\n    def request(caseData):\n        try:\n            # 获取请求配置\n            fileName = os.path.dirname(__file__)[:-7] + '/ConfigData' + '/Request.yaml'\n            requestData = readYaml(fileName)\n            # 请求url\n            if 'baseUrl' in caseData:\n                url = caseData['baseUrl'] + caseData['url']\n            else:\n                url = requestData['baseUrl'] + caseData['url']\n            # 请求方式\n            method = caseData['method']\n            api = caseData['api']\n            apiName = caseData['apiName']\n            with allure.step('请求接口'):\n                allure.attach(api, '接口')\n                allure.attach(apiName, '接口名称')\n                allure.attach(url, '请求地址')\n                if method == 'get' or method == 'delete':\n                    # TODO 这里毛凯璐说项目里面全是post请求方式 故这里参数没做处理\n                    allure.attach(str(caseData['data']), '请求数据')\n                    if caseData['data'] == None:\n                        response = requests.get(url=url)\n                    else:\n                        response = requests.get(url=url + caseData['data'])\n                # post请求\n                elif method == 'post' or method == 'patch':\n                    setJsonParam(caseData)\n                    data = json.dumps(caseData['data'])\n                    allure.attach(str(json.dumps(caseData['data'], ensure_ascii=False)), '请求数据')\n                    if data == None:\n                        response = requests.post(url=url)\n                    else:\n                        print(\"url:{}\".format(url))\n                        print(\"data:{}\".format(caseData['data']))\n                        response = requests.post(url=url, json=caseData['data'])\n        except Exception as Error:\n            with allure.step('请求接口失败，请检查！'):\n                allure.attach(str(Error), '错误信息')\n            assert False, '请求接口失败，请检查！'\n        else:\n            requestSuccess = 'success'\n            # returnValue_str = response.text\n            # returnValue = json.loads(returnValue_str)\n            # print(returnValue)\n            ciphertext = response.text\n            des = ChametDESCrypt('')\n            text = des.decrypt(ciphertext)\n            returnValue = json.loads(text)\n            print('returnValue:{}'.format(returnValue))\n            with allure.step('接口返回数据'):\n                allure.attach(str(returnValue), '返回数据')\n            # 如果yaml里面配置了success的期望值\n            if 'success' in caseData:\n                requestSuccess = caseData['success']\n            status_code = response.status_code\n            if status_code != 200:\n                with allure.step('接口响应码错误，请检查！'):\n                    allure.attach(str(status_code), '接口响应码')\n                    assert False, '接口响应码错误，请检查！'\n            success = returnValue['msg']\n            if requestSuccess != success:\n                with allure.step('接口处理结果错误，请检查！'):\n                    allure.attach(str(returnValue), '接口返回数据')\n>                   assert False, '接口处理结果错误，请检查！'\nE                   AssertionError: 接口处理结果错误，请检查！\n\nCommon\\Request.py:79: AssertionError"}, "steps": [{"name": "请求接口", "status": "passed", "attachments": [{"name": "接口", "source": "edb2203c-dbf1-415d-8df1-31aa319df807-attachment.attach"}, {"name": "接口名称", "source": "1e5f5437-bafc-4354-8dde-73f26e11c21f-attachment.attach"}, {"name": "请求地址", "source": "4d17efd6-d958-435e-9f9d-50a5c5030aef-attachment.attach"}, {"name": "请求数据", "source": "7eb5014e-48c4-4592-a4e5-08d7bfde9bad-attachment.attach"}], "start": 1692325536886, "stop": 1692325537246}, {"name": "接口返回数据", "status": "passed", "attachments": [{"name": "返回数据", "source": "8173eda4-49e6-463c-b93b-efaff6a92be9-attachment.attach"}], "start": 1692325537247, "stop": 1692325537248}, {"name": "接口处理结果错误，请检查！", "status": "failed", "statusDetails": {"message": "AssertionError: 接口处理结果错误，请检查！\n", "trace": "  File \"C:\\Users\\pgk bqt\\PycharmProjects\\chametApi\\chametApi\\Common\\Request.py\", line 79, in request\n    assert False, '接口处理结果错误，请检查！'\n"}, "attachments": [{"name": "接口返回数据", "source": "d1fc4940-0c52-4a09-9209-c5b4f2142aec-attachment.attach"}], "start": 1692325537248, "stop": 1692325537249}], "parameters": [{"name": "caseData", "value": "{'caseName': '拨打视频聊（观众给房主）', 'data': {'callType': 14, 'touserid': 2000004, 'ctype': '2'}, 'api': 'POST /startVideoChat', 'apiName': '拨打视频聊', 'method': 'post', 'url': '/videoChat/callSameTime/startVideoChat', 'headers': 0, 'userid': '20113007', 'user': 'B_primary'}"}], "start": 1692325531191, "stop": 1692325537250, "uuid": "cb830a1e-a4a1-43ce-b979-54a5f245776a", "historyId": "1a515113ff7c2de6ba16c66877c36b17", "testCaseId": "dcbc50393ff0119acfbadbe2b75eb6ae", "fullName": "TestCase.TenPartyAllowawayOrdinary.test_084_startVideoChat.Test_StartVideoChat#test_StartVideoChat", "labels": [{"name": "story", "value": "拨打视频聊（观众给房主）"}, {"name": "parentSuite", "value": "TestCase.TenPartyAllowawayOrdinary"}, {"name": "suite", "value": "test_084_startVideoChat"}, {"name": "subSuite", "value": "Test_StartVideoChat"}, {"name": "host", "value": "DESKTOP-8OL56K6"}, {"name": "thread", "value": "11616-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "TestCase.TenPartyAllowawayOrdinary.test_084_startVideoChat"}]}